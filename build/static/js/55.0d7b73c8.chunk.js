(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[55],{1397:function(e,t,s){"use strict";s.r(t);var n=s(1),a=s(453),c=s(480),r=s(123),i=s(464),l=s(465),d=s(467),o=s(471),u=s(466),j=s(543),m=s(478),b=s(497),h=s(127),f=s(470),x=s(475),p=s(450),O=s(849),g=s(787),v=s(842),N=s(799),w=s(809),y=s(824),E=s(847),U=s(832),D=s(6),k=function(e){var t=e.selectedUser,s=e.FetchData,n=Object(m.g)();return Object(D.jsx)(d.a,{children:Object(D.jsx)(f.a,{children:Object(D.jsxs)(i.a,{children:[Object(D.jsx)(l.a,{xl:"6",lg:"12",className:"d-flex flex-column justify-content-between border-container-lg",children:Object(D.jsx)("div",{className:"user-avatar-section",children:Object(D.jsxs)("div",{className:"d-flex justify-content-start",children:[function(){if(null!==t&&t.img)return Object(D.jsx)("img",{src:t.img,alt:"user-avatar",className:"img-fluid rounded",height:"104",width:"104"});var e=["light-success","light-danger","light-warning","light-info","light-primary","light-secondary"][Math.floor(6*Math.random())];return Object(D.jsx)(b.a,{initials:!0,color:e,className:"rounded",content:t.name,contentStyles:{borderRadius:0,fontSize:"calc(36px)",width:"100%",height:"100%"},style:{height:"90px",width:"90px"}})}(),Object(D.jsxs)("div",{className:"d-flex flex-column ml-1",children:[Object(D.jsxs)("div",{className:"user-info mb-1",children:[Object(D.jsx)("h4",{className:"mb-0",children:null!==t?t.name:"Eleanor Aguilar"}),Object(D.jsx)(x.a,{tag:"span",children:null!==t?t.email:"eleanor.aguilar@gmail.com"})]}),Object(D.jsxs)("div",{className:"d-flex flex-wrap align-items-center btn-sm",children:[Object(D.jsxs)("div",{className:"longButtons mb-1 mb-sm-0",children:[Object(D.jsx)(p.a.Ripple,{tag:a.b,to:"/clients/edit/".concat(t.id),color:"primary",className:"btn-sm",children:"Edit"}),Object(D.jsx)(p.a.Ripple,{className:"ml-1 btn-sm",color:"danger",outline:!0,onClick:function(){var e;e=t.id,h.a.dispatch(Object(c.d)(e)).then((function(e){n.go(-1)}))},children:"Delete"})]}),Object(D.jsx)(p.a.Ripple,{className:"ml-1 btn-sm",color:"inactive"===t.status?"success":"warning",outline:!0,onClick:function(){var e,n;e=t.id,n="inactive"===t.status?"active":"inactive",h.a.dispatch(Object(c.e)(e,n)).then((function(e){200===e.code&&s()}))},children:"inactive"===t.status?"Enable":"Disable"})]})]})]})})}),Object(D.jsx)(l.a,{xl:"6",lg:"12",className:"mt-2 mt-xl-0",children:Object(D.jsxs)("div",{className:"user-info-wrapper",children:[Object(D.jsxs)("div",{className:"d-flex flex-wrap align-items-center",children:[Object(D.jsxs)("div",{className:"user-info-title",children:[Object(D.jsx)(O.a,{className:"mr-1",size:14}),Object(D.jsx)(x.a,{tag:"span",className:"user-info-title font-weight-bold mb-0",children:"Username"})]}),Object(D.jsx)(x.a,{className:"mb-0",children:null!==t?t.name:"eleanor.aguilar"})]}),Object(D.jsxs)("div",{className:"d-flex flex-wrap align-items-center",children:[Object(D.jsxs)("div",{className:"user-info-title",children:[Object(D.jsx)(O.a,{className:"mr-1",size:14}),Object(D.jsx)(x.a,{tag:"span",className:"user-info-title font-weight-bold mb-0",children:"Business Name"})]}),Object(D.jsx)(x.a,{className:"mb-0",children:null!==t?t.businessName:"eleanor.aguilar"})]}),Object(D.jsxs)("div",{className:"d-flex flex-wrap align-items-center my-50",children:[Object(D.jsxs)("div",{className:"user-info-title",children:[Object(D.jsx)(g.a,{className:"mr-1",size:14}),Object(D.jsx)(x.a,{tag:"span",className:"user-info-title font-weight-bold mb-0",children:"Status"})]}),Object(D.jsx)(x.a,{className:"text-capitalize mb-0",children:t.status?t.status:"Active"})]}),Object(D.jsxs)("div",{className:"d-flex flex-wrap align-items-center my-50",children:[Object(D.jsxs)("div",{className:"user-info-title",children:[Object(D.jsx)(v.a,{className:"mr-1",size:14}),Object(D.jsx)(x.a,{tag:"span",className:"user-info-title font-weight-bold mb-0",children:"Role"})]}),Object(D.jsx)(x.a,{className:"text-capitalize mb-0",children:null!==t?t.type:"Admin"})]}),Object(D.jsxs)("div",{className:"d-flex flex-wrap align-items-center my-50",children:[Object(D.jsxs)("div",{className:"user-info-title",children:[Object(D.jsx)(N.a,{className:"mr-1",size:14}),Object(D.jsx)(x.a,{tag:"span",className:"user-info-title font-weight-bold mb-0",children:"Payment Type"})]}),Object(D.jsx)(x.a,{className:"mb-0",children:t.paymentType?t.paymentType:""})]}),Object(D.jsxs)("div",{className:"d-flex flex-wrap align-items-center my-50",children:[Object(D.jsxs)("div",{className:"user-info-title",children:[Object(D.jsx)(w.a,{className:"mr-1",size:14}),Object(D.jsx)(x.a,{tag:"span",className:"user-info-title font-weight-bold mb-0",children:"State"})]}),Object(D.jsx)(x.a,{className:"mb-0",children:t.state?t.state:""})]}),Object(D.jsxs)("div",{className:"d-flex flex-wrap align-items-center my-50",children:[Object(D.jsxs)("div",{className:"user-info-title",children:[Object(D.jsx)(y.a,{className:"mr-1",size:14}),Object(D.jsx)(x.a,{tag:"span",className:"user-info-title font-weight-bold mb-0",children:"Province"})]}),Object(D.jsx)(x.a,{className:"mb-0",children:t.province?t.province:""})]}),Object(D.jsxs)("div",{className:"d-flex flex-wrap align-items-center my-50",children:[Object(D.jsxs)("div",{className:"user-info-title",children:[Object(D.jsx)(E.a,{className:"mr-1",size:14}),Object(D.jsx)(x.a,{tag:"span",className:"user-info-title font-weight-bold mb-0",children:"District"})]}),Object(D.jsx)(x.a,{className:"mb-0",children:t.district?t.district:""})]}),Object(D.jsxs)("div",{className:"d-flex flex-wrap align-items-center",children:[Object(D.jsxs)("div",{className:"user-info-title",children:[Object(D.jsx)(U.a,{className:"mr-1",size:14}),Object(D.jsx)(x.a,{tag:"span",className:"user-info-title font-weight-bold mb-0",children:"Contact"})]}),Object(D.jsx)(x.a,{className:"mb-0",children:null!==t?t.phone:"no number saved"})]})]})})]})})})},z=s(830),T=s(804),A=s(574),R=s(751),S=s(752),_=s(971),L=s(756),C=s(766),P=function(e){var t=new Date(1e3*e);return"".concat(t.getDate(),"/").concat(t.getMonth(),"/").concat(t.getFullYear())},I=function(e){var t=e.items,s=function(e){return e.reduce((function(e,t){return+e+ +Number(t.productPrice.split("/")[1])}),0)};return Object(D.jsxs)(A.a,{size:"sm",responsive:!0,children:[Object(D.jsx)("thead",{children:Object(D.jsxs)("tr",{children:[Object(D.jsx)("th",{children:"Invoice ID"}),Object(D.jsx)("th",{children:"Products"}),Object(D.jsx)("th",{children:"Total"}),Object(D.jsx)("th",{children:"Created at"}),Object(D.jsx)("th",{children:"Nroguia"}),Object(D.jsx)("th",{children:"Actions"})]})}),Object(D.jsxs)("tbody",{children:[t.length>0&&t.map((function(e,t){return Object(D.jsxs)("tr",{children:[Object(D.jsx)("td",{className:"d-flex",children:Object(D.jsx)("span",{className:"align-self-center font-weight-bold",children:Object(D.jsx)(a.b,{to:"/invoice/preview/".concat(e.id),children:e.id})})}),Object(D.jsx)("td",{children:e.elements?e.elements.length:e.products?e.products.length:""}),Object(D.jsx)("td",{children:e.products?(n=e.products,n.reduce((function(e,t){return+e+ +Number(t.total)}),0)):e.elements?s(e.elements):null}),Object(D.jsx)("td",{children:P(e.created.seconds)}),Object(D.jsx)("td",{children:Object(D.jsx)(R.a,{pill:!0,color:"light-primary",className:"mr-1",children:e.nroGuia})}),Object(D.jsx)("td",{children:Object(D.jsxs)(S.a,{children:[Object(D.jsx)(_.a,{className:"icon-btn hide-arrow",color:"transparent",size:"sm",caret:!0,children:Object(D.jsx)(z.a,{size:15})}),Object(D.jsx)(L.a,{right:!0,children:Object(D.jsxs)(C.a,{tag:a.b,to:"/invoice/preview/".concat(e.id),children:[Object(D.jsx)(T.a,{className:"mr-50",size:15})," ",Object(D.jsx)("span",{className:"align-middle",children:"View"})]})})]})})]},"invoiceno-".concat(t));var n})),t.length<1&&Object(D.jsx)("tr",{children:Object(D.jsx)("td",{colSpan:"5",className:"text-center py-2",children:Object(D.jsx)("h4",{children:"No Invoices found"})})})]})]})};s(575),t.default=function(e){var t=Object(r.c)((function(e){return e.users})),s=Object(r.b)(),m=location.pathname.split("/"),b=m[m.length-1],h=function(){s(Object(c.h)(b)).then((function(e){s(Object(c.i)(e.selectedUser.email))}))};return Object(n.useEffect)((function(){h()}),[s]),null!==t.selectedUser&&void 0!==t.selectedUser?Object(D.jsxs)("div",{className:"app-user-view",children:[Object(D.jsx)(i.a,{children:Object(D.jsx)(l.a,{xl:"12",lg:"12",md:"12",children:Object(D.jsx)(k,{selectedUser:t.selectedUser,FetchData:h})})}),Object(D.jsx)(i.a,{children:Object(D.jsx)(l.a,{sm:"12",children:Object(D.jsxs)(d.a,{children:[Object(D.jsx)(o.a,{children:Object(D.jsx)(u.a,{tag:"h4",children:"Recent Invoices"})}),Object(D.jsx)(I,{items:t.selectedUserInvoices})]})})})]}):Object(D.jsxs)(j.a,{color:"danger",children:[Object(D.jsx)("h4",{className:"alert-heading",children:"User not found"}),Object(D.jsxs)("div",{className:"alert-body",children:["User with id: ",b," doesn't exist. Check list of all Users:"," ",Object(D.jsx)(a.b,{to:"/clients",children:"Users List"})]})]})}},480:function(e,t,s){"use strict";s.d(t,"f",(function(){return d})),s.d(t,"g",(function(){return o})),s.d(t,"h",(function(){return u})),s.d(t,"i",(function(){return j})),s.d(t,"c",(function(){return m})),s.d(t,"d",(function(){return b})),s.d(t,"e",(function(){return h})),s.d(t,"b",(function(){return x})),s.d(t,"a",(function(){return p}));var n=s(457),a=s.n(n),c=s(458),r=(s(82),s(468)),i=s(11),l=s(127),d=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.d.collection("users").get().then((function(e){var s=[];e.docs.map((function(e){var t=e.data();t.id=e.id,s.push(t)})),t({type:"GET_ALL_DATA",data:s})}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},o=function(e){var t=e.q,s=void 0===t?"":t,n=e.perPage,r=void 0===n?10:n,d=e.page,o=void 0===d?1:d,u=e.role,j=void 0===u?0:u;return function(){var t=Object(c.a)(a.a.mark((function t(n){var c,d,u;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=s.toLowerCase(),d=l.a.getState().users.allData,c.length>0&&(d=d.filter((function(e){return e.name.toLowerCase().includes(c)||e.email.toLowerCase().includes(c)?e:void 0}))),0===j){t.next=7;break}return t.next=6,d.filter((function(e){return e.category&&e.category===j}));case 6:d=t.sent;case 7:u={users:Object(i.b)(d,r,o)},n({type:"GET_DATA",data:u,totalPages:d.length,params:e});case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},u=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(s){var n,c,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.d.collection("users").doc(e),t.next=3,n.get();case 3:return(c=t.sent).exists||console.log("not found user"),(i=c.data()).id=e,t.abrupt("return",s({type:"GET_USER",selectedUser:i}));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},j=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(s){var n,c,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.d.collection("orders"),t.next=3,n.where("email","==",e).get();case 3:return(c=t.sent).empty&&console.log("No matching documents."),i=[],c.forEach((function(e){var t=e.data();t.id=e.id,i.push(t)})),t.abrupt("return",s({type:"GET_USER_INVOICES_DATA",data:i}));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},m=function(e){return Object(c.a)(a.a.mark((function t(){var s,n,c,i,l;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.created=new Date,s=r.d.collection("users"),n=e.email,c=e.password,t.next=5,r.a.createUserWithEmailAndPassword(n,c);case 5:return i=t.sent,t.next=8,i.user.updateProfile({displayName:e.name,photoURL:"user"});case 8:return t.next=10,s.doc(i.user.uid).set(e);case 10:return l=t.sent,t.abrupt("return",l);case 12:case"end":return t.stop()}}),t)})))},b=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(s,n){var c,i,l,d,o,u;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c=r.d.collection("users").doc(e),t.next=4,c.get();case 4:return i=t.sent,l=i.data(),d=l.email,o=l.password?l.password:"zeeeshan",t.next=9,c.delete();case 9:return t.next=11,r.a.signInWithEmailAndPassword(d,o);case 11:return t.sent,u=r.a.currentUser,t.next=15,u.delete();case 15:return s({type:"USER_DELETED",id:e}),t.abrupt("return",s({type:"USER_DELETED",id:e}));case 19:return t.prev=19,t.t0=t.catch(0),t.abrupt("return",s({type:"USER_DELETED",id:e}));case 22:case"end":return t.stop()}}),t,null,[[0,19]])})));return function(e,s){return t.apply(this,arguments)}}()},h=function(e,t){return Object(c.a)(a.a.mark((function s(){var n;return a.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,n=r.d.collection("users").doc(e),s.next=4,n.update({status:t});case 4:return s.abrupt("return",{message:"user updated successfully",code:200});case 7:return s.prev=7,s.t0=s.catch(0),s.abrupt("return",{message:"user cannot be updated",code:400});case 10:case"end":return s.stop()}}),s,null,[[0,7]])})))},f=function(e,t){r.d.collection("users").doc(e).update(t)},x=function(e,t,s,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return function(){var l=Object(c.a)(a.a.mark((function c(l){return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!i){a.next=5;break}r.e.ref("/images/".concat((1e32*Math.random()).toString(36))).put(i).on("state_changed",(function(e){s.state||n({state:!0,total:e._delegate.totalBytes,transfered:e._delegate.bytesTransferred})}),(function(e){return console.log(e),{message:"data cannot be updated",code:400}}),(function(){r.e.ref("images").child(i.name).getDownloadURL().then((function(s){return n({state:!1,total:0,transfered:0}),t.img=s,f(e,t),{message:"data updated successfully",code:200}}))})),a.next=7;break;case 5:return f(e,t),a.abrupt("return",{message:"data updated successfully",code:200});case 7:case"end":return a.stop()}}),c)})));return function(e){return l.apply(this,arguments)}}()},p=function(e){var t=e.id,s=e.prices;return Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(t,{categories:s}),e.abrupt("return",{message:"user updated successfully",code:200});case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",{message:"user cannot be updated",code:400,error:e.t0});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))}},575:function(e,t,s){}}]);
//# sourceMappingURL=55.0d7b73c8.chunk.js.map
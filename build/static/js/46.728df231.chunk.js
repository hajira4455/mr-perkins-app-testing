(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[46],{1035:function(e,t,a){},1402:function(e,t,a){"use strict";a.r(t);var n=a(18),r=a(1),c=a(453),s=(a(497),a(494)),i=a(127),o=a(853),l=a(752),u=a(971),d=a(756),p=a(766),j=a(837),m=a(785),b=a(836),f=a(776),x=a(816),h=a(833),g=a(787),v=a(804),O=a(830),N=a(845),w=a(6),y=(j.a,m.a,b.a,f.a,x.a,h.a,function(e){return e.reduce((function(e,t){return+e+ +Number(t.productPrice?t.productPrice.split("/")[1]:"1")}),0)}),C=function(e){return[{name:"#",minWidth:"107px",selector:"id",cell:function(e){return Object(w.jsx)(c.b,{to:"/invoice/preview/".concat(e.id),children:"#".concat(e.id)})}},{name:"Client",minWidth:"350px",selector:"client",sortable:!0,cell:function(e){var t=e.name?e.name:"Name Not Present",a=e.email?e.email:"EMAILNOTFOUND";return Object(w.jsx)("div",{className:"d-flex justify-content-left align-items-center",children:Object(w.jsxs)("div",{className:"d-flex flex-column",children:[Object(w.jsx)("h6",{className:"user-name text-truncate text-capitalize mb-0",children:t.toLowerCase()}),Object(w.jsx)("small",{className:"text-truncate text-muted mb-0",children:a})]})})}},{name:"Total",selector:"total",sortable:!0,minWidth:"100px",cell:function(e){return Object(w.jsxs)("span",{children:["$",e.products?(t=e.products,t.reduce((function(e,t){return+e+ +Number(t.total)}),0)):y(e.elements)||0]});var t}},{name:"Status",selector:"state",sortable:!0,minWidth:"200px",cell:function(e){return"ENTREGADO"===(t=e.state)?Object(w.jsxs)(r.Fragment,{children:[Object(w.jsx)(g.a,{size:"20",color:"green",className:"mr-1"}),t]}):t;var t}},{name:"Issued Date",selector:"dueDate",sortable:!1,minWidth:"200px",cell:function(e){return function(e){var t=new Date(1e3*e);return"".concat(t.getDate(),"/").concat(t.getMonth(),"/").concat(t.getFullYear())}(e.created?e.created.seconds:e.date.seconds)}},{name:"Action",minWidth:"110px",selector:"",sortable:!0,cell:function(t){return Object(w.jsxs)("div",{className:"column-action d-flex align-items-center",children:[Object(w.jsx)(j.a,{size:17,id:"send-tooltip-".concat(t.id)}),Object(w.jsx)(o.a,{placement:"top",target:"send-tooltip-".concat(t.id),children:"Send Mail"}),Object(w.jsx)(c.b,{to:"/invoice/preview/".concat(t.id),id:"pw-tooltip-".concat(t.id),children:Object(w.jsx)(v.a,{size:17,className:"mx-1"})}),Object(w.jsx)(o.a,{placement:"top",target:"pw-tooltip-".concat(t.id),children:"Preview Invoice"}),Object(w.jsxs)(l.a,{children:[Object(w.jsx)(u.a,{tag:"span",children:Object(w.jsx)(O.a,{size:17,className:"cursor-pointer"})}),Object(w.jsx)(d.a,{right:!0,children:Object(w.jsxs)(p.a,{tag:"a",href:"/",className:"w-100",onClick:function(a){a.preventDefault(),i.a.dispatch(Object(s.e)(t.id)).then((function(t){console.log(t),i.a.dispatch(Object(s.g)({page:1,perPage:10,status:"",q:e.q}))}))},children:[Object(w.jsx)(N.a,{size:14,className:"mr-50"}),Object(w.jsx)("span",{className:"align-middle",children:"Delete"})]})})]})]})}}]},D=a(680),P=a.n(D),k=a(788),I=a(621),S=a.n(I),E=a(464),L=a(465),T=a(473),q=a(736),A=a(450),_=a(474),F=a(467),V=a(123),z=(a(1035),a(681),function(e){var t=e.handleFilter,a=e.value,n=e.handleStatusValue,r=e.statusValue,s=e.handlePerPage,i=e.rowsPerPage;return Object(w.jsx)("div",{className:"invoice-list-table-header w-100 py-2",children:Object(w.jsxs)(E.a,{children:[Object(w.jsxs)(L.a,{lg:"6",className:"d-flex align-items-center px-0 px-lg-1",children:[Object(w.jsxs)("div",{className:"d-flex align-items-center mr-2",children:[Object(w.jsx)(T.a,{for:"rows-per-page",children:"Show"}),Object(w.jsxs)(q.a,{className:"form-control ml-50 pr-3",type:"select",id:"rows-per-page",value:i,onChange:s,children:[Object(w.jsx)("option",{value:"10",children:"10"}),Object(w.jsx)("option",{value:"25",children:"25"}),Object(w.jsx)("option",{value:"50",children:"50"})]})]}),Object(w.jsx)(A.a.Ripple,{tag:c.b,to:"/create_order",color:"primary",children:"Add New Record"})]}),Object(w.jsxs)(L.a,{lg:"6",className:"actions-right d-flex align-items-center justify-content-lg-end flex-lg-nowrap flex-wrap mt-lg-0 mt-1 pr-lg-1 p-0",children:[Object(w.jsxs)("div",{className:"d-flex align-items-center",children:[Object(w.jsx)(T.a,{for:"search-invoice",children:"Search"}),Object(w.jsx)(_.a,{id:"search-invoice",className:"ml-50 mr-2 w-100",type:"text",value:a,onChange:function(e){return t(e.target.value)},placeholder:"Search Invoice"})]}),Object(w.jsxs)(_.a,{className:"w-auto ",type:"select",value:r,onChange:n,children:[Object(w.jsx)("option",{value:"",children:"Select Status"}),Object(w.jsx)("option",{value:"downloaded",children:"Downloaded"}),Object(w.jsx)("option",{value:"draft",children:"Draft"}),Object(w.jsx)("option",{value:"paid",children:"Paid"}),Object(w.jsx)("option",{value:"partial payment",children:"Partial Payment"}),Object(w.jsx)("option",{value:"past due",children:"Past Due"}),Object(w.jsx)("option",{value:"partial payment",children:"Partial Payment"})]})]})]})})});t.default=function(){var e=Object(V.b)(),t=Object(V.c)((function(e){return e.invoice})),a=Object(r.useState)(""),c=Object(n.a)(a,2),i=c[0],o=c[1],l=Object(r.useState)(1),u=Object(n.a)(l,2),d=u[0],p=u[1],j=Object(r.useState)(""),m=Object(n.a)(j,2),b=m[0],f=m[1],x=Object(r.useState)(10),h=Object(n.a)(x,2),g=h[0],v=h[1];Object(r.useEffect)((function(){e(Object(s.g)({page:d,perPage:g,status:b,q:i}))}),[e,t.data.length]);return Object(w.jsx)("div",{className:"invoice-list-wrapper",children:Object(w.jsx)(F.a,{children:Object(w.jsx)("div",{className:"invoice-list-dataTable",children:Object(w.jsx)(S.a,{noHeader:!0,pagination:!0,paginationServer:!0,subHeader:!0,columns:C({q:i}),responsive:!0,sortIcon:Object(w.jsx)(k.a,{}),className:"react-dataTable",defaultSortField:"invoiceId",paginationDefaultPage:d,paginationComponent:function(){var a=Number((t.total/g).toFixed(0));return Object(w.jsx)(P.a,{pageCount:a||1,nextLabel:"",breakLabel:"...",previousLabel:"",activeClassName:"active",breakClassName:"page-item",breakLinkClassName:"page-link",forcePage:0!==d?d-1:0,onPageChange:function(t){return function(t){e(Object(s.g)({page:t.selected+1,perPage:g,status:b,q:i})),p(t.selected+1)}(t)},pageClassName:"page-item",nextLinkClassName:"page-link",nextClassName:"page-item next",previousClassName:"page-item prev",previousLinkClassName:"page-link",pageLinkClassName:"page-link",containerClassName:"pagination react-paginate justify-content-end p-1"})},data:function(){var e={status:b,q:i},a=Object.keys(e).some((function(t){return e[t].length>0}));return t.data.length>0?t.data:0===t.data.length&&a?[]:t.allData.slice(0,g)}(),subHeaderComponent:Object(w.jsx)(z,{value:i,statusValue:b,rowsPerPage:g,handleFilter:function(t){o(t),e(Object(s.g)({page:d,perPage:g,status:b,q:t}))},handlePerPage:function(t){e(Object(s.g)({page:d,perPage:parseInt(t.target.value),status:b,q:i})),v(parseInt(t.target.value))},handleStatusValue:function(t){f(t.target.value),e(Object(s.g)({page:d,perPage:g,status:t.target.value,q:i}))}})})})})})}},494:function(e,t,a){"use strict";a.d(t,"g",(function(){return o})),a.d(t,"c",(function(){return l})),a.d(t,"d",(function(){return u})),a.d(t,"b",(function(){return d})),a.d(t,"f",(function(){return p})),a.d(t,"a",(function(){return j})),a.d(t,"h",(function(){return m})),a.d(t,"e",(function(){return b}));var n=a(457),r=a.n(n),c=a(458),s=(a(82),a(468)),i=a(11),o=(a(127),function(e){var t=e.q,a=void 0===t?"":t,n=e.perPage,o=void 0===n?10:n,l=e.page,u=void 0===l?1:l,d=(e.status,a.toLowerCase());return function(){var t=Object(c.a)(r.a.mark((function t(a,n){var c,l,p,j,m,b,f;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n().auth;case 2:if(c=t.sent,l=c.userData,p=s.d.collection("orders"),j=l.type,!l.user){t.next=27;break}if("admin"!==j){t.next=13;break}return t.next=10,p.get();case 10:t.t0=t.sent,t.next=21;break;case 13:if(!l.id){t.next=19;break}return t.next=16,p.where("userID","==",l.id).get();case 16:t.t1=t.sent,t.next=20;break;case 19:t.t1=null;case 20:t.t0=t.t1;case 21:return m=t.t0,b=[],t.next=25,m.docs.map((function(e){var t=e.data();t.id=e.id,b.push(t)}));case 25:f=b.filter((function(e){return e.name&&e.email&&(e.name.toLowerCase().includes(d)||e.email.toLowerCase().includes(d)||e.userID.toLowerCase().includes(d))})).sort(Object(i.d)("id")).reverse(),a({type:"GET_INVOICE_DATA",data:Object(i.b)(f,o,u),allData:b,totalPages:b.length,params:e});case 27:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}),l=function(e){var t=e.formID,a=e.product;return function(e){a.product&&e({type:"SET_FORM_DATA",data:{formID:t,details:{product:a.product,qty:a.qty,total:a.total}}})}},u=function(e){return function(t){t({type:"INVOICE_CREATOR_DETAILS",data:e})}},d=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(a,n){var c,i,o,l,u,d,p;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=n().invoice,i=c.createInvoice,o=c.invoiceCreatorDetails,l=n().auth.userData,e.products=[],Object.keys(i).map((function(t){e.products.push(i[t])})),e.userID=o.id?o.id:l.id,e.name="admin"===l.type?o.name:l.user.name,e.email="admin"===l.type?o.email:l.user.email,e.created=new Date,e.status="unattended",u=s.d.collection("orders"),t.next=12,u.add(e);case 12:return d=t.sent,t.next=15,u.doc(d.id).get();case 15:return p=t.sent,t.abrupt("return",p.data());case 17:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},p=function(e){return function(t){t({type:"DELETE_INVOICE_DATA",data:e})}},j=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(a){var n,c,i;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.d.collection("orders"),t.next=3,n.doc(e).get();case 3:return c=t.sent,(i=c.data()).id=e,t.abrupt("return",a({type:"GET_SINGLE_INVOICE",data:i}));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},m=function(e){var t=e.id,a=e.state;return function(){var e=Object(c.a)(r.a.mark((function e(n){var c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=s.d.collection("orders"),e.next=3,c.doc(t).update({state:a});case 3:return e.sent,e.abrupt("return","invoiceUpdated");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},b=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(a){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.d.collection("orders"),t.next=3,n.doc(e).delete();case 3:return t.sent,t.abrupt("return","orderDeleted");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},681:function(e,t,a){}}]);
//# sourceMappingURL=46.728df231.chunk.js.map